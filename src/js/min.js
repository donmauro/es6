(function(){"use strict";const onClickClosebtn=()=>{document.querySelector(".message-modal").style.display="none"};const show=msg=>{const message_html=`\n    <div id="id01" class="message-modal">\n      <div class="message-modal-content">\n        <span class="message-modal-closebtn">&times;</span>\n        <p id="message-modal-text">${msg}</p>\n      </div>\n    </div>\n  `;document.querySelector(".shell-modal").innerHTML=message_html;document.querySelector(".message-modal").style.display="block";document.querySelector(".message-modal-closebtn").addEventListener("click",onClickClosebtn)};const socket=io.connect("/chat");const list=[{k:1,val:"A"},{k:2,val:"B"},{k:3,val:"C"}];const main_html$1=`\n  <div class="create">\n    <form>\n      <select id="xselect"></select>\n      <select id="yselect"></select>\n    </form>\n  </div>\n`;const initModule$1=container=>{container.innerHTML=main_html$1;socket.emit("read",{nome:{$regex:"^",$options:"i"}});socket.on("read",result=>{const x=document.querySelector("#xselect");x.options.length=0;for(let row of result){const option=document.createElement("option");option.text=row.nome+" "+row.cognome;option.value=row._id;x.add(option)}x.addEventListener("change",event=>{alert(event.currentTarget.value)})});const x=document.querySelector("#yselect");for(let row of list){const option=document.createElement("option");option.text=row.val;option.value=row.k;x.add(option)}x.addEventListener("change",event=>{alert(event.currentTarget.value)})};const main_html$2=`\n  <div class="read">\n    Nome: <input id="nomeRead" type="text" >\n    <input id="search" type="button" value="Cerca"></input><br>\n    <br>\n    <input id="nuovo" type="button" value="Nuovo"></input><br>\n    <div class="read-sub"></div>\n\n  </div>\n\n`;const create_html=`\n  <div class="create">\n    <form>\n      Nome:<br>\n      <input type="text" name="nome"><br>\n      Cognome:<br>\n      <input type="text" name="cognome"><br>\n      Data di nascita:<br>\n      <input type="date" name="dataNascita"><br><br>\n\n    </form>\n    <input name="salva" type="button" value="Salva"></input>\n  </div>\n`;const search=()=>{const queryString=document.querySelector("#nomeRead").value;socket.emit("read",{nome:{$regex:"^"+queryString,$options:"i"}});socket.on("read",result=>{let html=String();html+="<table>";html+="<tr><th>Nome</th><th>Cognome</th><th>Data di nascita</th></tr>";for(let row of result){html+="<tr><td><p>"+row.nome+"</p></td><td><p>"+row.cognome+"</p></td><td><p>"+row.dataNascita+'</p></td><td><p id="'+row._id+'" class="elimina">Elimina</p></td></tr>'}html+="</table>";document.querySelector(".read-sub").innerHTML=html;const dels=document.querySelectorAll(".elimina");for(let del of dels){del.addEventListener("click",event=>{elimina(event.currentTarget.id)})}})};const elimina=id=>{socket.emit("destroy",id);socket.on("destroy",result=>{console.log(result);document.querySelector("input[id='search']").click()})};const serializeArray$1=fields=>{const object={};for(let field of fields){object[field.name]=field.value}return object};const nuovo=()=>{document.querySelector(".read-sub").innerHTML=create_html;document.querySelector("input[name='salva']").addEventListener("click",()=>{const elements=document.querySelectorAll("form input");const dataObject=serializeArray$1(elements);socket.emit("create",dataObject);socket.on("create",result=>{console.log(result);document.querySelector(".read-sub").innerHTML=""})})};const initModule$2=container=>{container.innerHTML=main_html$2;document.querySelector("input[id='search']").addEventListener("click",search);document.querySelector("input[id='nuovo']").addEventListener("click",nuovo)};const main_html=`\n  <div class="shell-head">\n    <div class="shell-head-logo">\n      <h1>ES6</h1>\n      <p>no framework</p>\n    </div>\n    <div class="shell-head-acct"></div>\n  </div>\n  <div class="shell-main">\n    <div class="shell-main-nav"></div>\n    <div class="shell-main-content">\n      <div class="shell-main-content-message"></div>\n      <div class="shell-main-content-body"></div>\n    </div>\n  </div>\n  <div class="shell-foot"></div>\n  <div class="shell-modal"></div>\n`;const nav_html=`\n  <ul>\n    <li id="create" class="shell-nav-li"><a href="#create">Create</a></li>\n    <li id="read" class="shell-nav-li"><a href="#read">Read</a></li>\n    <li id="message" class="shell-nav-li"><a href="#message">Message</a></li>\n    <li shell-nav-li><a href="#contact">Contact</a></li>\n    <li shell-nav-li><a href="#about">About</a></li>\n  </ul>\n`;const onClickMenuitem=id=>{switch(id){case"create":{initModule$1(document.querySelector(".shell-main-content"));break}case"read":{initModule$2(document.querySelector(".shell-main-content"));break}case"message":{show("Messaggio modale");break}}};const initModule=container=>{container.innerHTML=main_html;document.querySelector(".shell-main-nav").innerHTML=nav_html;const li=document.getElementsByClassName("shell-nav-li");for(let _li of li){_li.addEventListener("click",event=>{onClickMenuitem(event.currentTarget.id)})}};document.addEventListener("DOMContentLoaded",()=>{initModule(document.getElementById("spa"))},false)})();
